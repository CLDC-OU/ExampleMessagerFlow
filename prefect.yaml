name: example-flow

definitions:
  work_pools:
    default_work_pool: &default_work_pool
      name: default
      work_queue_name: default
  schedules:
    every_ten_minutes: &every_ten_minutes
      cron: "*/10 * * * *"
      timezone: "America/Detroit"

deployments:
  - name: message-deployment
    entrypoint: ./flows/daily_message.py:daily_message_flow
    pull:
      - prefect.deployments.steps.git_clone:
          id: clone_step
          repository: "https://github.com/CLDC-OU/examplemessagerflow.git"
          reference: "refs/tags/latest"
          access_token: null
      - prefect.deployments.steps.pip_install_requirements:
          directory: "{{ clone_step.directory }}"
          requirements_file: "requirements.txt"
    schedule: *every_ten_minutes
    work_pool: *default_work_pool
    parameters:
      env: "production"
      config_path: "configs/production.json"
    environment:
      EXAMPLE: "example_value"
